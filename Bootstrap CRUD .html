<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BS08</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<body>
    <div class="container">
    <!------------------------------------ This is ADD & EDIT BUTTON---------------------------------------------------->
        <h2 class="bg-info text-center">STUDENT DATA ENTRY</h2>
        <button class="btn btn-primary btn-lg" style="margin-left: 40%;" data-toggle="modal" data-target="#addpopup">ADD+</button>
        <button class="btn btn-warning btn-lg" data-toggle="modal" data-target="#editpopup">EDIT</button>
    
    <br>
    <br>

    <!------------------------------------ This is Table---------------------------------------------------------------->
    
        <table id="taccess" class="table table-bordered table-striped">
            <thead>
                <th>Name</th>
                <th>Age</th>
                <th>Rollnumber</th>
                <th>Email</th>
                <th>Address</th>
                <th>Gender</th>
                <th>Sports</th>
                <th>Fav.subject</th>
                <th>Actions</th>
            </thead>
            <tbody id="tbodyaccess">
    
            </tbody>
        </table>

    </div>

    <!------------------------------------ This is add form------------------------------------------------------------->
    <div class="container ">
        <div id="addpopup" class="modal fade" role="dialog">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h3 class="text-center text-info">ADD FORM</h3>
                    </div>
                    <div class="modal-body">
                        <form action="" id="faccess">
                            <div class="row">
                                <div class="col-md-4">
                                    <label for="">Name:</label>
                                    <input type="text" class="form-control" placeholder="Enter your name" id="name">
                                    <div id="nameerror" class="text-danger"></div>
                                </div>
                                <div class="col-md-4">
                                    <label for="">Age:</label>
                                    <input type="number" class="form-control" placeholder="Enter your age" id="age">
                                    <div id="ageerror" class="text-danger"></div>
                                </div>
                                <div class="col-md-4">
                                    <label for="">RollNumber:</label>
                                    <input type="text" class="form-control" placeholder="Enter your rollno" id="rollno">
                                    <div id="rollnoerror" class="text-danger"></div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label for="">Email:</label>
                                    <input type="email" class="form-control" placeholder="Enter your email" id="mail">
                                    <div id="mailerror" class="text-danger"></div>
                                </div>
                                <div class="col-md-6">
                                    <label for="">Address:</label>
                                    <textarea class="form-control" placeholder="Enter your address" id="add"></textarea>
                                    <div id="adderror" class="text-danger"></div>
                                </div>
                            </div>
                            <div class="row">
                                
                                <div class="col-md-12">
                                    <label for="">Gender:</label>
                                    <input type="radio" class="form-check-input" name="gender" value="male">
                                    <label for="">Male</label>
                                    <input type="radio" class="form-check-input" name="gender" value="female">
                                    <label for="">Female</label>
                                    <input type="radio" class="form-check-input" name="gender" value="others">
                                    <label for="">Others</label>
                                    <div id="gendererror" class="text-danger"></div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2">
                                    <label for="">Sports:</label>
                                    <input type="checkbox" class="form-check-input" name="sport" value="cricket">
                                    <label for="">Cricket</label>
                                </div>
                                <div class="col-md-2">
                                    <input type="checkbox" class="form-check-input" name="sport" value="volleyball">
                                    <label for="">volleyball</label>
                                </div>
                                <div class="col-md-2">
                                    <input type="checkbox" class="form-check-input" name="sport" value="Tabletennis">
                                    <label for="">Tabletennis</label>
                                </div>
                                <div class="col-md-2">
                                    <input type="checkbox" class="form-check-input" name="sport" value="Football">
                                    <label for="">Football</label>
                                </div>
                                <div class="col-md-2">
                                    <input type="checkbox" class="form-check-input" name="sport" value="Basketball">
                                    <label for="">Basketball</label>
                                </div>
                                <div class="col-md-2">
                                    <input type="checkbox" class="form-check-input" name="sport" value="Hockey">
                                    <label for="">Hockey</label>
                                </div>
                                <div id="sporterror" class="text-danger" style="margin-left: 15px;"></div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <label for="">Select your favourite subject:</label>
                                    <select class="form-select" aria-label="Default select example" name="subjects">
                                        <option selected value="select" name="sub">--select--</option>
                                        <option value="Tamil" name="sub">Tamil</option>
                                        <option value="English" name="sub">English</option>
                                        <option value="Maths" name="sub">Mathematics</option>
                                        <option value="Science" name="sub">Science</option>
                                        <option value="SocialScience" name="sub">S.Science</option>
                                      </select>
                                      <div id="subjectserror" class="text-danger"></div>
                            </div>
                            </div>
                            <br>
                            <div class="row">
                                <div class="col-md-12">
                                    <button type="button" class="btn btn-primary" onclick="adformsubmit()">SUBMIT</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    <!------------------------------------ This is edit form ----------------------------------------------------------->
        <div id="editpopup" class="modal fade" role="dialog">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h3 class="text-center text-warning">EDIT FORM</h3>
                    </div>
                    <div class="modal-body">
                        <form action="" id="edfaccess">
                            <div class="row">
                                <div class="col-md-4">
                                    <label for="">Name:</label>
                                    <input type="text" class="form-control" placeholder="Enter your name" id="edname">
                                    <div id="ednameerror" class="text-danger"></div>
                                </div>
                                <div class="col-md-4">
                                    <label for="">Age:</label>
                                    <input type="number" class="form-control" placeholder="Enter your age" id="edage">
                                    <div id="edageerror" class="text-danger"></div>
                                </div>
                                <div class="col-md-4">
                                    <label for="">RollNumber:</label>
                                    <input type="text" class="form-control" placeholder="Enter your rollno" id="edrollno">
                                    <div id="edrollnoerror" class="text-danger"></div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <label for="">Email:</label>
                                    <input type="email" class="form-control" placeholder="Enter your email" id="edmail">
                                    <div id="edmailerror" class="text-danger"></div>
                                </div>
                                <div class="col-md-6">
                                    <label for="">Address:</label>
                                    <textarea class="form-control" placeholder="Enter your address" id="edadd"></textarea>
                                    <div id="edadderror" class="text-danger"></div>
                                </div>
                            </div>
                            <div class="row">
                                
                                <div class="col-md-12">
                                    <label for="">Gender:</label>
                                    <input type="radio" class="form-check-input" name="edgender" value="male">
                                    <label for="">Male</label>
                                    <input type="radio" class="form-check-input" name="edgender" value="female">
                                    <label for="">Female</label>
                                    <input type="radio" class="form-check-input" name="edgender" value="others">
                                    <label for="">Others</label>
                                    <div id="edgendererror" class="text-danger"></div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-2">
                                    <label for="">Sports:</label>
                                    <input type="checkbox" class="form-check-input" name="edsport" value="cricket">
                                    <label for="">Cricket</label>
                                </div>
                                <div class="col-md-2">
                                    <input type="checkbox" class="form-check-input" name="edsport" value="volleyball">
                                    <label for="">volleyball</label>
                                </div>
                                <div class="col-md-2">
                                    <input type="checkbox" class="form-check-input" name="edsport" value="Tabletennis">
                                    <label for="">Tabletennis</label>
                                </div>
                                <div class="col-md-2">
                                    <input type="checkbox" class="form-check-input" name="edsport" value="Football">
                                    <label for="">Football</label>
                                </div>
                                <div class="col-md-2">
                                    <input type="checkbox" class="form-check-input" name="edsport" value="Basketball">
                                    <label for="">Basketball</label>
                                </div>
                                <div class="col-md-2">
                                    <input type="checkbox" class="form-check-input" name="edsport" value="Hockey">
                                    <label for="">Hockey</label>
                                </div>
                                <div id="edsporterror" class="text-danger" style="margin-left: 15px;"></div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <label for="">Select your favourite subject:</label>
                                    <select class="form-select" aria-label="Default select example" name="edsubjects">
                                        <option selected value="select" name="edsub">--select--</option>
                                        <option value="Tamil" name="edsub">Tamil</option>
                                        <option value="English" name="edsub">English</option>
                                        <option value="Maths" name="edsub">Mathematics</option>
                                        <option value="Science" name="edsub">Science</option>
                                        <option value="SocialScience" name="edsub">S.Science</option>
                                      </select>
                                      <div id="edsubjectserror" class="text-danger"></div>
                            </div>
                            </div>
                            <br>
                            <div class="row">
                                <div class="col-md-12">
                                    <button type="button" class="btn btn-success" onclick="edsubmit()">UPDATE</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
// -----------------------------------------AD form submit-----------------------------------------------------//
        function adformsubmit(){
            var adforminfo=read();
            if((!adforminfo.name=="") && (!adforminfo.age=="") && (!adforminfo.rollno=="") && (!adforminfo.email=="") && (!adforminfo.address=="") && (!adforminfo.gender=="") && (!adforminfo.sports=="")&&(!adforminfo.subject=="")){
            arrayfun(adforminfo);
            tableinsert();
            document.getElementById("faccess").reset();
            alert("Data's are successfully inserted in a table");
           }
           else{
            alert("Please fillout all");
           }
        }

// -----------------------------------------AD form read------------------------------------------------------//
        function read(){
            var student ={}
            var aderrors={
                "name":{
                    "req":{"msg":"Name field will not be empty"},
                    "minlen":{"msg":"Minimum 4 characters is required"},
                    "maxlen":{"msg":"Maximum 25 characters only allowed"},
                    "type":{"msg":"Alphabets only allowed"}
                },
                "age":{
                    "req":{"msg":"Age field will not be empty"},
                    "valid":{"msg":"Enter a valid age"},
                    "type":{"msg":"Number only"}
                },
                "rollno":{
                    "req":{"msg":"Rollnumber is required"},
                    "minlen":{"msg":"minimum 6 characters is required"},
                    "maxlen":{"msg":"maximum 6 characters only allowed"},
                    "type":{"msg":"characters and numbers only allowed"}
                },
                "mail":{
                    "req":{"msg":"Enter your Email"},
                    "minlen":{"msg":"Minum 15 characters required for a valid email"},
                    "maxlen":{"msg":"Maximum 40 characters only allowed"},
                    "valid":{"msg":"Enter a valid email"}
                },
                "add":{
                    "req":{"msg":"This field will not be empty"},
                    "type":{"msg":"A-Z,a-z,0-9, space and / only allowed"}
                },
                "radio":{
                    "req":{"msg":"Please select your gender"}
                },
                "checkbox":{
                    "req":{"msg":"Please select your favourite sports"}
                },
                "dropdown":{
                    "req":{"msg":"Please select your fav. subject"}
                }
            }

            var key = Object.keys(aderrors);
            // console.log(key)

            var form=document.getElementById('faccess');

            var namecheck=/^[A-Za-z\t-\.]{3,25}$/;
            var rollnocheck=/^[A-Za-z0-9]{6,6}$/;
            var agecheck=/^[0-9]{1,2}$/;
            var mailcheck=/^[a-zA-Z0-9]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)$/; 
            var addcheck= /^[A-Za-z0-9\t-\.\/\,]+$/;


            for(var i=0; i<form.length; i++){
                var getform=form.elements[i]
                // console.log(getform)

                var id_s = getform.id;
                var name_s = getform.name;

                for(var j=0; j<key.length; j++){
                    var getkey=Object.keys(aderrors[key[j]])
                    // console.log(getkey)
                    for(var k=0; k<getkey.length; k++){
                        var test = getkey[k];


                        if(getform.type=="text"){
                            if(getform.id=="name"){
                                var txtval=getform.value;

                            if(getkey[k]){
                                if(txtval==""){
                                    document.getElementById(id_s+"error").innerHTML=aderrors.name.req.msg;
                                
                                }
                            }
                            if(getkey[k]){
                                if(txtval.length>0 && txtval.length<5){
                                    document.getElementById(id_s+"error").innerHTML=aderrors.name.minlen.msg;
                                }
                            }
                            if(getkey[k]){
                                if(txtval.length>25){
                                    document.getElementById(id_s+"error").innerHTML=aderrors.name.maxlen.msg;
                                }
                            }
                            if(getkey[k]){
                                if(txtval.length>3 && txtval.length<25){
                                    if(txtval.match(namecheck)){
                                        document.getElementById(id_s+"error").innerHTML=""
                                        student.name=txtval;
                                    }
                                    else{
                                        document.getElementById(id_s+"error").innerHTML=aderrors.name.type.msg;
                                    }
                                }
                            }
                        }

                        if(getform.id=="rollno"){
                            var txtval2=getform.value;

                            if(getkey[k]){
                                if(txtval2==""){
                                    document.getElementById(id_s+"error").innerHTML=aderrors.rollno.req.msg;
                                }
                            }
                            if(getkey[k]){
                                if(txtval2.length>0 && txtval2.length<6){
                                    document.getElementById(id_s+"error").innerHTML=aderrors.rollno.minlen.msg;
                                }
                            }
                            if(getkey[k]){
                                if(txtval2.length>6){
                                    document.getElementById(id_s+"error").innerHTML=aderrors.rollno.maxlen.msg;
                                }
                            }
                            if(getkey[k]){
                                if(txtval2.length>0 && txtval2.length<=6){
                                    if(txtval2.match(rollnocheck)){
                                        document.getElementById(id_s+"error").innerHTML="";
                                        student.rollno=txtval2;
                                    }
                                    else{
                                        document.getElementById(id_s+"error").innerHTML=aderrors.rollno.type.msg;
                                    }
                                }
                            }
                            
                        }
                        }

                        if(getform.type=="number"){
                            var numval=getform.value;
                            //console.log(numval);

                        if(getkey[k]){
                            if(numval==""){
                                document.getElementById(id_s+"error").innerHTML=aderrors.age.req.msg;
                            }
                        }
                        if(getkey[k]){
                            if(numval.length>=3){
                                if(numval>100){
                                    document.getElementById(id_s+"error").innerHTML=aderrors.age.valid.msg;
                                }
                            }
                        }
                        if(getkey[k]){
                            if(numval.length>=1 && numval.length<=3 && numval<=100){
                                if(numval.match(agecheck)){
                                    document.getElementById(id_s+"error").innerHTML="";
                                    student.age=numval;
                                }
                                else{
                                    document.getElementById(id_s+"error").innerHTML=aderrors.age.type.age;
                                }
                            }
                        }
                        }

                        if(getform.type=="email"){
                        var mailvalue = getform.value;
                        //console.log(mailvalue);

                        if(getkey[k]){
                            if(mailvalue==""){
                                document.getElementById(id_s+"error").innerHTML=aderrors.mail.req.msg;
                            }
                        }
                        if(getkey[k]){
                            if(mailvalue.length>0 && mailvalue.length<15){
                                document.getElementById(id_s+"error").innerHTML=aderrors.mail.minlen.msg;
                            }
                        }
                        if(getkey[k]){
                            if(mailvalue.length>40){
                                document.getElementById(id_s+"error").innerHTML=aderrors.mail.maxlen.msg;
                            }
                        }
                        if(getkey[k]){
                            if(mailvalue.length>=15 && mailvalue.length<=40){
                                if(mailvalue.match(mailcheck)){
                                    document.getElementById(id_s+"error").innerHTML="";
                                    student.email=mailvalue;
                                }
                                else{
                                    document.getElementById(id_s+"error").innerHTML=aderrors.mail.valid.msg;
                                }
                            }
                        }
                    }

                    if(getform.type=="textarea"){
                        var addvalue = getform.value;
                        //console.log(addvalue);
                        if(getkey[k]){
                            if(addvalue==""){
                                document.getElementById(id_s+"error").innerHTML=aderrors.add.req.msg;
                            }
                        }
                        if(getkey[k]){
                            if(addvalue.length>0){
                                if(addvalue.match(addcheck)){
                                    document.getElementById(id_s+"error").innerHTML="";
                                    student.address=addvalue;
                                }
                                else{
                                    document.getElementById(id_s+"error").innerHTML=aderrors.add.type.msg;
                                }
                            }
                            
                        }
                    }

                    if(getform.type=="radio"){
                        var radios = document.getElementsByName(name_s);
                        // console.log(radios);
                        for(var l=0; l<radios.length; l++){
                            if(getkey[k]){
                                if(radios[l].checked){
                                    var rval = radios[l].value;
                                    document.getElementById(name_s+"error").innerHTML="";
                                    student.gender=rval;
                                   // console.log(rval);
                                    break;
                                }
                                else{
                                    document.getElementById(name_s+"error").innerHTML=aderrors.radio.req.msg;
                                }
                            }
                        }

                    }

                    if(getform.type=="checkbox"){
                        var cbox = document.getElementsByName(name_s);
                        // console.log(cbox)
                        var carray=[];
                        var status=false;
                        for(var m=0; m<cbox.length; m++){
                            if(getkey[k]){
                                if(cbox[m].checked){
                                    status=true;
                                    carray.push(cbox[m].value)
                                    student.sports=carray;
                                    //console.log(carray);
                                }
                                else{
                                    if(status==true){
                                        document.getElementById(name_s+"error").innerHTML="";
                                    }
                                    else{
                                        document.getElementById(name_s+"error").innerHTML=aderrors.checkbox.req.msg;
                                    }
                                    
                                }
                            }
                        }
                        
                    }

                    if(getform.name=="subjects"){
                        var dropdown = document.getElementsByName("sub");
                        // console.log(dropdown);
                        var frstval = document.getElementsByName("sub")[0].value;
//                        console.log(frstval)
                        for(var n=0; n<dropdown.length; n++){
                            if(getkey[k]){
                            if(dropdown[n].selected){
                                var dropval=dropdown[n].value;
                                student.subject = dropval;
                                document.getElementById(name_s+"error").innerHTML="";
                                //console.log(dropval);
                            }
                            else{
                                if(frstval==dropval){
                                    document.getElementById(name_s+"error").innerHTML=aderrors.dropdown.req.msg;
                                }
                            }
                        }
                        }
                    }

                    }
                }

            }
            return student;
        }
// -----------------------------------------Array-----------------------------------------------------------//
        var array=[];
        function arrayfun(student){
           
            array.push(student);
            console.log(array);

        }
// -----------------------------------------Tableinsert-----------------------------------------------------//
        function tableinsert(){
            
            var table=document.getElementById("tbodyaccess");
            table.innerHTML="";

            var table = document.getElementById("tbodyaccess");
            

            for(var i=0; i<array.length; i++){
                var row = table.insertRow(table.length);

                var cell0 = row.insertCell(0);
                cell0.innerHTML=array[i].name;

                var cell1 = row.insertCell(1);
                cell1.innerHTML=array[i].age;

                var cell2 = row.insertCell(2);
                cell2.innerHTML=array[i].rollno;


                var cell3 = row.insertCell(3);
                cell3.innerHTML=array[i].email;

                var cell4 = row.insertCell(4);
                cell4.innerHTML=array[i].address;

                var cell5 = row.insertCell(5);
                cell5.innerHTML=array[i].gender;

                var cell6 = row.insertCell(6);
                cell6.innerHTML=array[i].sports;

                var cell7=row.insertCell(7);
                cell7.innerHTML=array[i].subject;

                var cell8 = row.insertCell(8);
                cell8.innerHTML="<button  class='btn btn-info' onclick='onEdit(this)'>Edit</button> <button class='btn btn-danger' onclick='onDelete(this)'>Delete</button>"
            }
        }

// -----------------------------------------onEdit-----------------------------------------------------//
        var tval="";
        function onEdit(td){
            document.getElementById("faccess").reset();

            tval = td.parentElement.parentElement;
            // console.log(tval);

            document.getElementById("edname").value=tval.cells[0].innerHTML;
            document.getElementById("edage").value=tval.cells[1].innerHTML;
            document.getElementById("edrollno").value=tval.cells[2].innerHTML;
            document.getElementById("edmail").value=tval.cells[3].innerHTML;
            document.getElementById("edadd").value=tval.cells[4].innerHTML;
            var radioval = tval.cells[5].innerHTML;

            var radio = document.getElementsByName("edgender");
            for(let i=0; i<radio.length; i++){
                if(radioval==radio[i].value){
                    radio[i].checked=true;
                }
            }

            var cboxval = tval.cells[6].innerHTML;

            var cbox = document.getElementsByName("edsport");
            var sportary = cboxval.split(",");

            for(let j=0; j<cbox.length; j++){
                for(let k=0; k<sportary.length; k++){
                    if(sportary[k]==cbox[j].value){
                        cbox[j].checked=true;
                    }
                }
            }

            var favsub = tval.cells[7].innerHTML;
            // console.log("favsub"+favsub)

            var sub = document.getElementsByName("edsub");
            // console.log(sub);

            for(let l=0; l<sub.length; l++){
                if(favsub==sub[l].value){
                    sub[l].selected=true;
                }
            }
           
        }
// -----------------------------------------onDelete-----------------------------------------------------//
        function onDelete(td){
            var rowdel = td;
            document.getElementById("tbodyaccess").deleteRow(rowdel.rowIndex);

            var rowdelary=td.parentElement.parentElement;
            var rollnoget = rowdelary.cells[2].innerHTML;
            console.log(rollnoget);

            for(let i=0; i<array.length; i++){
                var aryrlno = array[i].rollno;
                console.log(aryrlno);
                if(rollnoget==aryrlno){
                    // console.log("in")
                    array.splice(rowdelary.rowIndex,1);
                    alert("Table has been Deleted successfully!");
                    // console.log("out");
                    console.log(array);
                }
            }
            tableinsert();
        }

//---------------------------------------Ed form submit---------------------------------------------------------//
        function edsubmit(){
            var edstdinfo=edread();

            if((!edstdinfo.name=="") && (!edstdinfo.age=="") && (!edstdinfo.rollno=="") && (!edstdinfo.email=="") && (!edstdinfo.address=="") && (!edstdinfo.gender=="") && (!edstdinfo.sports=="")&&(!edstdinfo.subject=="")){
                onUpdate();
                alert("Data updated successfully on Table!.")
           }
           else{

            if(tval==""){
                alert("You can't directly insert a table value here. Please use Add button to insert values");
            }
            
            
           }
        }

        




// -----------------------------------------ED form read-----------------------------------------------------//
        function edread(){
            var edform=document.getElementById("edfaccess");
            // console.log(edform);
            var edstudent ={};

            var ederrors={
                "edname":{
                    "req":{"msg":"Name field will not be empty"},
                    "minlen":{"msg":"Minimum 4 characters is required"},
                    "maxlen":{"msg":"Maximum 25 characters only allowed"},
                    "type":{"msg":"Alphabets only allowed"}
                },
                "edage":{
                    "req":{"msg":"Age field will not be empty"},
                    "valid":{"msg":"Enter a valid age"},
                    "type":{"msg":"Number only"}
                },
                "edrollno":{
                    "req":{"msg":"Rollnumber is required"},
                    "minlen":{"msg":"minimum 6 characters is required"},
                    "maxlen":{"msg":"maximum 6 characters only allowed"},
                    "type":{"msg":"characters and numbers only allowed"}
                },
                "edmail":{
                    "req":{"msg":"Enter your Email"},
                    "minlen":{"msg":"Minum 15 characters required for a valid email"},
                    "maxlen":{"msg":"Maximum 40 characters only allowed"},
                    "valid":{"msg":"Enter a valid email"}
                },
                "edadd":{
                    "req":{"msg":"Address field will not be empty"},
                    "type":{"msg":"A-Z,a-z,0-9, space and / only allowed"}
                },
                "edradio":{
                    "req":{"msg":"Please select your gender"}
                },
                "edcheckbox":{
                    "req":{"msg":"Please select your favourite sports"}
                },
                "eddropdown":{
                    "req":{"msg":"Please select your fav. subject"}
                }
            }

            var edkey = Object.keys(ederrors);
            // console.log(edkey)

            var ednamecheck=/^[A-Za-z\t-\.]{3,25}$/;
            var edrollnocheck=/^[A-Za-z0-9]{6,6}$/;
            var edagecheck=/^[0-9]{1,2}$/;
            var edmailcheck=/^[a-zA-Z0-9]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)$/; 
            var edaddcheck= /^[A-Za-z0-9\t-\.\/\,]+$/;

            for(var i=0; i<edform.length; i++){
                var edgetform=edform.elements[i];
                // console.log(edgetform);

                var edid_s = edgetform.id;
                var edname_s = edgetform.name;

                for(var j=0; j<edkey.length; j++){
                    var edgetkey=Object.keys(ederrors[edkey[j]])
                    for(var k=0; k<edgetkey.length; k++){
                        if(edgetform.type=="text"){
                            if(edgetform.id=="edname"){
                                var edtxtval=edgetform.value;

                            if(edgetkey[k]){
                                if(edtxtval==""){
                                    document.getElementById(edid_s+"error").innerHTML=ederrors.edname.req.msg;
                                
                                }
                            }
                            if(edgetkey[k]){
                                if(edtxtval.length>0 && edtxtval.length<5){
                                    document.getElementById(edid_s+"error").innerHTML=ederrors.edname.minlen.msg;
                                }
                            }
                            if(edgetkey[k]){
                                if(edtxtval.length>25){
                                    document.getElementById(edid_s+"error").innerHTML=ederrors.edname.maxlen.msg;
                                }
                            }
                            if(edgetkey[k]){
                                if(edtxtval.length>3 && edtxtval.length<25){
                                    if(edtxtval.match(ednamecheck)){
                                        document.getElementById(edid_s+"error").innerHTML=""
                                        edstudent.name=edtxtval;
                                    }
                                    else{
                                        document.getElementById(edid_s+"error").innerHTML=ederrors.edname.type.msg;
                                    }
                                }
                            }
                        }

                        if(edgetform.id=="edrollno"){
                            var edtxtval2=edgetform.value;

                            if(edgetkey[k]){
                                if(edtxtval2==""){
                                    document.getElementById(edid_s+"error").innerHTML=ederrors.edrollno.req.msg;
                                }
                            }
                            if(edgetkey[k]){
                                if(edtxtval2.length>0 && edtxtval2.length<6){
                                    document.getElementById(edid_s+"error").innerHTML=ederrors.edrollno.minlen.msg;
                                }
                            }
                            if(edgetkey[k]){
                                if(edtxtval2.length>6){
                                    document.getElementById(edid_s+"error").innerHTML=ederrors.edrollno.maxlen.msg;
                                }
                            }
                            if(edgetkey[k]){
                                if(edtxtval2.length>0 && edtxtval2.length<=6){
                                    if(edtxtval2.match(edrollnocheck)){
                                        document.getElementById(edid_s+"error").innerHTML="";
                                        edstudent.rollno=edtxtval2;
                                    }
                                    else{
                                        document.getElementById(edid_s+"error").innerHTML=ederrors.edrollno.type.msg;
                                    }
                                }
                            }
                            
                        }
                        }

                        if(edgetform.type=="number"){
                            var ednumval=edgetform.value;
                            //console.log(numval);

                        if(edgetkey[k]){
                            if(ednumval==""){
                                document.getElementById(edid_s+"error").innerHTML=ederrors.edage.req.msg;
                            }
                        }
                        if(edgetkey[k]){
                            if(ednumval.length>=3){
                                if(ednumval>100){
                                    document.getElementById(edid_s+"error").innerHTML=ederrors.edage.valid.msg;
                                }
                            }
                        }
                        if(edgetkey[k]){
                            if(ednumval.length>=1 && ednumval.length<=3 && ednumval<=100){
                                if(ednumval.match(edagecheck)){
                                    document.getElementById(edid_s+"error").innerHTML="";
                                    edstudent.age=ednumval;
                                }
                                else{
                                    document.getElementById(edid_s+"error").innerHTML=ederrors.edage.type.age;
                                }
                            }
                        }
                        }

                        if(edgetform.type=="email"){
                        var edmailvalue = edgetform.value;
                        //console.log(edmailvalue);

                        if(edgetkey[k]){
                            if(edmailvalue==""){
                                document.getElementById(edid_s+"error").innerHTML=ederrors.edmail.req.msg;
                            }
                        }
                        if(edgetkey[k]){
                            if(edmailvalue.length>0 && edmailvalue.length<15){
                                document.getElementById(edid_s+"error").innerHTML=ederrors.edmail.minlen.msg;
                            }
                        }
                        if(edgetkey[k]){
                            if(edmailvalue.length>40){
                                document.getElementById(edid_s+"error").innerHTML=ederrors.edmail.maxlen.msg;
                            }
                        }
                        if(edgetkey[k]){
                            if(edmailvalue.length>=15 && edmailvalue.length<=40){
                                if(edmailvalue.match(edmailcheck)){
                                    document.getElementById(edid_s+"error").innerHTML="";
                                    edstudent.email=edmailvalue;
                                }
                                else{
                                    document.getElementById(edid_s+"error").innerHTML=ederrors.edmail.valid.msg;
                                }
                            }
                        }
                    }

                    if(edgetform.type=="textarea"){
                        var edaddvalue = edgetform.value;
                        //console.log(addvalue);
                        if(edgetkey[k]){
                            if(edaddvalue==""){
                                document.getElementById(edid_s+"error").innerHTML=ederrors.edadd.req.msg;
                            }
                        }
                        if(edgetkey[k]){
                            if(edaddvalue.length>0){
                                if(edaddvalue.match(edaddcheck)){
                                    document.getElementById(edid_s+"error").innerHTML="";
                                    edstudent.address=edaddvalue;
                                }
                                else{
                                    document.getElementById(edid_s+"error").innerHTML=ederrors.edadd.type.msg;
                                }
                            }
                            
                        }
                    }

                    if(edgetform.type=="radio"){
                        var edradios = document.getElementsByName(edname_s);
                        // console.log(radios);
                        for(var l=0; l<edradios.length; l++){
                            if(edgetkey[k]){
                                if(edradios[l].checked){
                                    var edrval = edradios[l].value;
                                    document.getElementById(edname_s+"error").innerHTML="";
                                    edstudent.gender=edrval;
                                   // console.log(rval);
                                    break;
                                }
                                else{
                                    document.getElementById(edname_s+"error").innerHTML=ederrors.edradio.req.msg;
                                }
                            }
                        }

                    }

                    if(edgetform.type=="checkbox"){
                        var edcbox = document.getElementsByName(edname_s);
                        // console.log(cbox)
                        var edcarray=[];
                        var status=false;
                        for(var m=0; m<edcbox.length; m++){
                            if(edgetkey[k]){
                                if(edcbox[m].checked){
                                    status=true;
                                    edcarray.push(edcbox[m].value)
                                    edstudent.sports=edcarray;
                                    //console.log(carray);
                                }
                                else{
                                    if(status==true){
                                        document.getElementById(edname_s+"error").innerHTML="";
                                    }
                                    else{
                                        document.getElementById(edname_s+"error").innerHTML=ederrors.edcheckbox.req.msg;
                                    }
                                    
                                }
                            }
                        }
                        
                    }

                    if(edgetform.name=="edsubjects"){
                        var eddropdown = document.getElementsByName("edsub");
                        var edfrstval = document.getElementsByName("edsub")[0].value;

                        for(var n=0; n<eddropdown.length; n++){
                            if(edgetkey[k]){
                            if(eddropdown[n].selected){
                                var eddropval=eddropdown[n].value;
                                edstudent.subject = eddropval;
                                document.getElementById(edname_s+"error").innerHTML="";
                            }
                            else{
                                if(edfrstval==eddropval){
                                    document.getElementById(edname_s+"error").innerHTML=ederrors.eddropdown.req.msg;
                                }
                            }
                        }
                        }
                    }



                    }
                }

                
            }
            return edstudent;
        }
        
        function onUpdate(){
           
            let get1 = document.getElementById("edname").value;
            let get2 = document.getElementById("edage").value;
            let get3 = document.getElementById("edrollno").value;
            let get4 = document.getElementById("edmail").value;
            let get5 = document.getElementById("edadd").value;
            var r = document.getElementsByName("edgender");

                for(let j=0; j<r.length; j++){
                    if(r[j].checked){
                       let edrval = r[j].value;
                       var get6 = edrval;
                    }
                }

            var c = document.getElementsByName("edsport");
            var carrayed=[];

            for(let k=0; k<c.length; k++){
            if(c[k].checked){
                carrayed.push(c[k].value);
                var get7=carrayed;
               }
            }

            var d = document.getElementsByName("edsub");
            for(let l=0; l<d.length; l++){
                    if(d[l].selected){
                       let eddval = d[l].value;
                       var get8 = eddval;
                    }
                }

            for(let i=0; i<array.length; i++){
                if(array[i].rollno==get3){
                    array[i].name=get1;
                    array[i].age=get2;
                    array[i].rollno=get3;
                    array[i].email=get4;
                    array[i].address=get5;
                    array[i].gender=get6;
                    array[i].sports=get7;
                    array[i].subject=get8;

                    console.log(array);
                }
            }

            tval.cells[0].innerHTML=get1;
            tval.cells[1].innerHTML=get2;
            tval.cells[2].innerHTML=get3;
            tval.cells[3].innerHTML=get4;
            tval.cells[4].innerHTML=get5;
            tval.cells[5].innerHTML=get6;
            tval.cells[6].innerHTML=get7;
            tval.cells[7].innerHTML=get8;
            document.getElementById("edfaccess").reset();
            
            
        }
            

        









    </script>
</body>
</html>